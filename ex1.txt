<p-toolbar styleClass="mb-4">
	<ng-template pTemplate="left">
		<button pButton pRipple label="New" icon="pi pi-plus" class="p-button-success mr-2" (click)="openNew()"></button>
	</ng-template>
</p-toolbar>

<h5>Menu personne</h5>
<p>Lite personne</p>

<p-table #dt1 [value]="lists" dataKey="id" [rows]="10" [showCurrentPageReport]="true"
		 [rowsPerPageOptions]="[10,25,50]" styleClass="p-datatable-customers p-datatable-gridlines"
		 [paginator]="true" currentPageReportTemplate="Affichage de {first} à {last} sur {totalRecords} en entrées"
		 [globalFilterFields]="['nom','list.nom','status']">

	<ng-template pTemplate="header">
		<tr>
			<th>
				<div class="p-d-flex p-jc-between p-ai-center">
					Nom
					<p-columnFilter type="text" field="nom" display="menu"></p-columnFilter>
				</div>
			</th>
			<th>
				<div class="p-d-flex p-jc-between p-ai-center">
					Prénom
				</div>
			</th>

			<th>
				<div class="p-d-flex p-jc-between p-ai-center">
					Age
					<p-columnFilter type="text" field="age" display="menu"></p-columnFilter>
				</div>
			</th>

			<th>
				<div class="p-d-flex p-jc-between p-ai-center">
					Departement
				</div>
			</th>

			<th>
				<div class="p-d-flex p-jc-between p-ai-center">
					Option
				</div>
			</th>

		</tr>
	</ng-template>


	<ng-template pTemplate="body" let-list>
		<tr>
			<td>
				{{list.nom}}
			</td>
			<td>
				{{list.prenom}}
			</td>
			<td>
				{{list.age}}
			</td>

			<td>
				{{list.departement.designation}}
			</td>
			<td>
				<button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success p-mr-2" (click)="editPersonne(list)"></button>
				<button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="deletePersonne(list)"></button>
			</td>
		</tr>
	</ng-template>

	<ng-template pTemplate="emptymessage">
		<tr>
			<td colspan="4">No customers found.</td>
		</tr>
	</ng-template>
</p-table>

<p-dialog [(visible)]="personnesDialog" [style]="{width: '450px'}" header="Formulaire personne" [modal]="true" styleClass="p-fluid">
	<form [formGroup]="personneForm" (ngSubmit)="savePersonne()">
		<div class="grid">
			<div class="col-12 mt-2">
				<p-autoComplete formControlName="departement" [showEmptyMessage]="true" [suggestions]="filtereddepartement" (completeMethod)="filterDepartement($event)" field="designation" [minLength]="1"></p-autoComplete>
			</div>
			<div class="col-12">
				<span class="p-float-label">
					<input type="text" id="inputtext6" pInputText formControlName="nom">
					<label for="inputtext6">Nom</label>
				</span>
			</div>

			<div class="col-12">
				<span class="p-float-label">
					<input type="text" id="inputtext5" pInputText formControlName="prenom">
					<label for="inputtext5">Prenom</label>
				</span>
			</div>

			<div class="col-12">
				<span class="p-float-label">
					<input type="text" id="inputtext4" pInputText formControlName="age">
					<label for="inputtext4">Age</label>
				</span>
			</div>

			<button type="submit" pButton pRipple label="Save" icon="pi pi-check" class="p-button-text p-button-sm"></button>
		</div>
	</form>
</p-dialog>

<p-dialog [(visible)]="personneDialog" [style]="{width: '450px'}" header="mise à jour personne" [modal]="true" styleClass="p-fluid">

	<form [formGroup]="personneFormUpdate" (ngSubmit)="updatePersonne()">

		<div class="grid">

			<div class="col-12">
				<p-autoComplete formControlName="departement2" [showEmptyMessage]="true" [suggestions]="filtereddepartement" (completeMethod)="filterDepartement($event)" field="designation" [minLength]="1"></p-autoComplete>
			</div>
			<div class="col-12">
                    <span class="p-float-label">
                        <input type="text" id="inputtext1" pInputText formControlName="nom2">
                        <label for="inputtext1">Nom</label>
                    </span>
			</div>

			<div class="col-12">
				<span class="p-float-label">
					<input type="text" id="inputtext2" pInputText formControlName="prenom2">
					<label for="inputtext2">Prenom</label>
				</span>
			</div>

			<div class="col-12">
                    <span class="p-float-label">
                        <input type="text" id="inputtext3" pInputText formControlName="age2">
                        <label for="inputtext3">Age</label>
                    </span>
			</div>

			<button [disabled]="!personneFormUpdate.valid" type="submit" pButton pRipple label="Save" icon="pi pi-check" class="p-button-text p-button-sm"></button>

		</div>

	</form>
</p-dialog>

<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>

<p-toast position="top-right" key="myKey1"></p-toast>
<p-toast position="top-left" key="myKey2"></p-toast>
<p-toast position="bottom-right" key="myKey3"></p-toast>



